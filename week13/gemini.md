# 智能客服功能介紹

## 概述

本次實作的智能客服是一個懸浮於網頁右下角的聊天視窗，使用 Google Gemini 大型語言模型 (LLM) 提供即時、自然的對話體驗。此功能讓用戶能夠詢問飲料店相關問題，獲得專業且個性化的回答。

## 技術架構

### 前端架構
- 使用原生 JavaScript 與 Socket.IO 客戶端
- 懸浮式聊天視窗 CSS 設計
- 即時打字效果模擬真人回覆感

### 後端架構
- Django 網頁框架作為主要服務
- Socket.IO 伺服器處理即時通訊
- Google Gemini API 處理自然語言理解與生成

### 通訊流程
- 用戶訊息透過 Socket.IO 發送至伺服器
- 伺服器轉發至 Gemini API 處理
- 回應以逐字流式傳輸回前端

## 關鍵功能

1. **即時對話**：透過 Socket.IO 實現無需頁面重載的即時通訊
2. **自然語言處理**：使用 Gemini 模型理解用戶意圖並生成自然回應
3. **店鋪知識整合**：整合飲料店菜單、價格、優惠等資訊
4. **打字效果**：實現逐字顯示的打字效果，增強使用者體驗
5. **響應式設計**：在各種設備上皆能良好顯示與操作

## 技術實現方式

智能客服功能透過以下幾個關鍵技術組件實現：

1. **Socket.IO 通訊**：建立即時雙向通訊通道
2. **Gemini API**：處理自然語言理解與回應生成
3. **逐字輸出機制**：實現打字效果增強用戶體驗
4. **知識庫整合**：提供飲料店專業知識支援
5. **懸浮式界面**：不干擾主要網頁內容的交互設計

## 客製化飲料店知識

智能客服整合了飲料店的專業知識，包括：
- 完整菜單與價格
- 店家資訊（地址、電話、營業時間）
- 特殊優惠與活動
- 常見問題解答

實作方式：將飲料店資訊整理成結構化文本，作為模型的上下文提示。

```python
tea_shop_knowledge = """
茶香飲品是一家專門提供高品質手搖飲料的店。以下是我們的主要信息：

店名：茶香飲品
地址：台北市信義區信義路五段100號
營業時間：週一至週日 10:00-22:00
電話：02-1234-5678
Email：info@chaxiang.com

主要產品類別：
1. 人氣茶飲：包括珍珠奶茶(60元)、芒果綠茶(75元)、鮮奶茶(65元)
2. 特調飲品：包括繽紛水果茶(85元)、抹茶拿鐵(80元)、檸檬冬瓜茶(70元)

杯型選擇：
- 中杯（基本價格）
- 大杯（+10元）

配料選擇：珍珠、布丁、仙草、茶凍
"""
```

## 用戶體驗設計

1. **直覺式操作**：懸浮按鈕易於發現，點擊即可開啟對話
2. **自然對話流**：模型經過提示優化，回應更加自然友善
3. **視覺反饋**：打字動畫提供視覺反饋，增加互動感
4. **品牌一致性**：聊天界面採用與網站一致的視覺風格（#DFFFDF）
5. **預設歡迎訊息**：開啟對話即顯示友善的歡迎訊息

## 視覺設計

聊天視窗的視覺設計符合品牌風格，使用清新的綠色 (#DFFFDF) 作為主色調，搭配簡潔的界面元素，讓用戶能夠直觀地進行交流。界面包含圓形聊天圖標、彈出式對話框、訊息氣泡以及輸入區域，整體設計注重易用性和視覺舒適度。

## 實際應用

該智能客服可以：
- 回答關於菜單、價格的詢問
- 提供店家資訊和營業時間
- 解釋飲品成分和特色
- 介紹當前促銷活動
- 協助解決常見問題

## 執行方法

1. **安裝所需套件**：
```bash
pip install django djangorestframework google-generativeai python-socketio eventlet
```

2. **取得 Google Gemini API 金鑰**：
   - 訪問 Google AI Studio (https://aistudio.google.com/)
   - 在設定頁面中創建 API 金鑰
   - 將金鑰添加到 socketio_server.py 文件中

3. **啟動服務**：
```bash
# 啟動 Socket.IO 服務
python socketio_server.py

# 另一個終端，啟動 Django 服務
python manage.py runserver
```

## 未來改進方向

1. **對話歷史記錄**：實現對話歷史儲存功能
2. **多語言支援**：增加英文等其他語言支援
3. **訂單整合**：直接在對話中查詢或建立訂單
4. **顧客識別**：對會員提供個性化服務
5. **分析功能**：追蹤常見問題以優化服務

這個智能客服功能不僅提升了網站的互動性，也為顧客提供了即時、專業的服務體驗，代表了飲料店擁抱數位創新的決心。